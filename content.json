{"meta":{"title":"Hexo","subtitle":null,"description":null,"author":"John Doe","url":"http://yoursite.com"},"pages":[],"posts":[{"title":"Django数据库","slug":"Django数据库","date":"2017-12-26T02:44:24.000Z","updated":"2017-12-26T06:58:47.536Z","comments":true,"path":"2017/12/26/Django数据库/","link":"","permalink":"http://yoursite.com/2017/12/26/Django数据库/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"Django模板","slug":"Django模板","date":"2017-12-26T00:24:52.000Z","updated":"2017-12-26T02:42:14.912Z","comments":true,"path":"2017/12/26/Django模板/","link":"","permalink":"http://yoursite.com/2017/12/26/Django模板/","excerpt":"","text":"==本文中代码不可直接借鉴，由于模板语言与md存在命名规则冲突，文中代码会出现缺少{\\%的问题== 一、 配置、启动1.django-admin startproject mysitesettings 配置设置urls 路由分配wsgi web服务器 manage.py —– Django项目里面的工具，通过它可以调用django shell和数据库等。settings.py —- 包含了项目的默认设置，包括数据库信息，调试标志以及其他一些工作的变量。urls.py —– 负责把URL模式映射到应用程序。views 视图函数 2.在mysite 目录下创建blog应用python manage.py startapp blogblog文件 中models.py ormviews.py httpresponse实例化 requesttest.py 检测用admin.py 强大之处 3.启动Django项目python manage.py runserver 8080 二、 url路由系统1.url与视图函数之间的映射表url(正则表达式，视图函数，参数，别名) 2.正则表达式以开头，以$结尾视图函数拿到的都是字符串*url(r’^articles/([0-9]{4})/([0-9]{2})/([0-9]+)/$’, views.article_detail), 代表重一到无穷次 3.有命名分组url(r’^index/(?P[0-9]{4})’,views.index,{“name”:’alex’})后面name 覆盖前面的值 4.对URL起别名action={\\% url “alex” %} 5.模板语言{\\% for i in user_list%} {\\% endfor %} 三、标签form&gt;input*3按TAB&#39;django.middleware.csrf.CsrfViewMiddleware&#39;安全验证将csrf_token加入HTML中 用于生成csrf_token的标签，用于防治跨站攻击验证。 其实，这里是会生成一个input标签，和其他表单标签一起提交给后台的。 if for with 用更简单的变量名替代复杂的变量名 url 引用路由配置 load 加载标签库 verbatim 禁止renderforloop.counter 计数器必须在INSTALLED_APPS中添加APP名称四、Template和Context格式化输出:&quot;%s&quot; 变量前后端分离模板语言：html+逻辑控制语句，作用：纽带后端：1234`&#123;&quot;abc&quot;:times&#125;``&#123;&quot;abc&quot;:&quot;hello&quot;&#125;` 前段： render(请求文件,模板,context) return render(request,”cur_time.html”,{“abc”:times}) 命令行如何显示python manage.py shell进入项目的Django环境from django.template import Context,Templatet=Template(&quot;hello&quot;)c=Context({&quot;name&quot;:&quot;alex&quot;})t渲染c t.render(c)一个模板可以渲染多个context对象 12345678910```#lowfor name in (&apos;John&apos;,&apos;Julie&apos;,&apos;Pat&apos;): t = Tempalte(&apos;Hello,&#123;&#123;name&#125;&#125;&apos;) print t.render(Context(&#123;&apos;name&apos;:name&#125;))#Goodt = Template(&apos;Hello,&#123;&#123;name&#125;&#125;&apos;)for name in (&apos;John&apos;,&apos;Julie&apos;,&apos;Pat&apos;): print t.render(Context(&#123;&apos;name&apos;:name&#125;)) Django模板解析非常快捷，大部分的解析工作都市在后台通过对简短正则表达式一次性调用来完成。这和基于XML的模板引擎形成鲜明对比，那些引擎承担了xml解析器的开销，且往往比Django模板渲染引擎要满上几个数量级。 12345678910111213141516171819202122232425262728293031323334from django.shortcuts import render,HttpResponsefrom django.template.loader import get_template #记得导入# Create your views here.import datetimefrom django.template import Template,Context# def current_time(req): #原始的视图函数 # now=datetime.datetime.now() # html=&quot;&lt;html&gt;&lt;body&gt;现在时刻：&lt;h1&gt;%s.&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot; %now # return HttpResponse(html)# def current_time(req): #django模板修改的视图函数# now=datetime.datetime.now()# t=Template(&apos;&lt;html&gt;&lt;body&gt;现在时刻是:&lt;h1 style=&quot;color:red&quot;&gt;&#123;&#123;current_date&#125;&#125;&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&apos;) #t=get_template(&apos;current_datetime.html&apos;)# c=Context(&#123;&apos;current_date&apos;:now&#125;)# html=t.render(c)# return HttpResponse(html)#另一种写法(推荐)def current_time(req): now=datetime.datetime.now() return render(req, &apos;current_datetime.html&apos;, &#123;&apos;current_date&apos;:now&#125;) 五、 过滤器filter万能的句点号sys.path 记录搜索变量的路径，项目加载的时候回添加到项目根目录位置模板语言中没有中括号，用句点号 if循环计时，从1开始计counter0从0开始计 filter,sample_tagfilter参数不能超过两个filter格式第一个参数|filter名：第二个参数sample_tag不能用于ifsample_tag格式sample_tag函数名 第一个参数 第二个参数 第三个参数 常用过滤器1 add ： 给变量加上相应的值 2 addslashes : 给变量中的引号前加上斜线 3 capfirst : 首字母大写4 cut ： 从字符串中移除指定的字符 5 date ： 格式化日期字符串 6 default ： 如果值是False,就替换成设置的默认值，否则就是用本来的值 7 default_if_none: 如果值是None，就替换成设置的默认值，否则就使用本来的值 六、模板 继承在HTML中 可替换的部分 用 block endblock包起来在填充 HTML中 extends 继承父HTML文件，而且可以邮以下形式1234block block endblockendblock 创建 123&lt;1&gt; 创建 base.html 模板，在其中定义站点的主要外观感受。 这些都是不常修改甚至从不修改的部分。&lt;2&gt; 为网站的每个区域创建 base_SECTION.html 模板(例如, base_photos.html 和 base_forum.html )。这些模板对base.html 进行拓展，并包含区域特定的风格与设计。&lt;3&gt; 为每种类型的页面创建独立的模板，例如论坛页面或者图片库。 这些模板拓展相应的区域模板。 注意1234 &lt;1&gt;如果在模板中使用 extends必须保证其为模板中的第一个模板标记。 否则，模板继承将不起作用 &lt;2&gt;一般来说，基础模板中的block %标签越多越好。 &lt;3&gt;如果发觉自己在多个模板之间拷贝代码，你应该考虑将该代码段放置到父模板的某个 block中。如果要访问父模板中的块的内容，使用 &#123;&#123; block.super &#125;&#125;这个标签&lt;4&gt;不允许在同一个模板中定义多个同名的 block。存在这样的限制是因为block 标签的工作方式是双向的。block 标签不仅挖了一个要填的坑，也定义了在父模板中这个坑所填充的内容。如果模板中出现了两个相同名称的block标签，父模板将无从得知要使用哪个块的内容。 ==小结==123456789101. 重点 render(req,template对象，context对象)2. 句点号（调用列表，属性）3. 两个大括号加变量4. &#123;var_name|filter&#125;|管道符后面用Filter过滤器（addslashes 给变量中的引号前加深斜线）5. |管道符后面加safe，变量是含HTML标签的特殊字符串让HTML渲染。6. sample_tag（可以传多个参数，但不能用于if for语句）和filter（最多两个参数，第一个参数是管道符前的数）7. 在settings中 `Installapps（app）`8. 文件夹的名字固定：templatetags tags9. .html文件最上面&#123;\\%load tags%\\&#125;10. 继承 extends 为了避免重复，调用模板","categories":[],"tags":[{"name":"Django框架","slug":"Django框架","permalink":"http://yoursite.com/tags/Django框架/"}]},{"title":"Hello World","slug":"hello-world","date":"2017-12-21T13:03:18.664Z","updated":"2017-12-21T13:03:18.664Z","comments":true,"path":"2017/12/21/hello-world/","link":"","permalink":"http://yoursite.com/2017/12/21/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}